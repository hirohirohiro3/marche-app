# Marche App (モバイルオーダープラットフォーム)

## コンセプト
**「行列をなくそう。もっと会話を楽しもう。」**
イベントや店舗での注文・決済をスマホひとつで完結させる、次世代モバイルオーダープラットフォーム。

## アプリの概要
Marche Appは、お客様自身のスマートフォンを使って「注文」から「決済」までを完了できるモバイルオーダーシステムです。
専用アプリのダウンロードは不要。QRコードを読み取るだけで、誰でもすぐに利用できます。

## 主な特徴

### 1. アプリ不要！0秒で注文開始（ゲスト購入）
- **特徴**: 会員登録やアプリのインストールが一切不要です。
- **メリット**: QRコードを読み取るだけでメニューが開き、その場ですぐに注文できます。お客様の手間を極限まで減らし、機会損失を防ぎます。

### 2. 多彩な決済手段に対応（Stripe連携）
- **特徴**: クレジットカードはもちろん、Apple Pay、Google Payに対応。
- **メリット**: スマホに登録済みのカードで、ワンタップで支払いが完了します。
- **ハイブリッド対応**: 「現金」や「PayPay」などの対面支払いも選択可能。お店の運用に合わせて柔軟に使えます。

### 3. インボイス対応のデジタルレシート
- **特徴**: 紙のレシートは不要。メールでデジタルレシートを発行できます。
- **メリット**: インボイス制度（適格請求書）に対応した形式で発行可能。店舗名や登録番号も自由に設定でき、経費精算が必要なお客様にも喜ばれます。

### 4. リアルタイム注文管理
- **特徴**: 注文が入ると店舗側の管理画面に即座に反映されます。
- **メリット**: 「調理待ち」「提供済み」などのステータス管理も簡単。混雑時のオーダーミスや提供漏れを防ぎます。
- **推奨環境**: 店舗管理画面は情報量が多いため、タブレット端末（iPadなど）での利用を推奨します。スマホでも利用可能ですが、タブレットならより快適に一覧性を確保できます。

### 5. シンプルで美しいUI
- **特徴**: 誰でも迷わず使える、直感的でモダンなデザイン。
- **メリット**: 商品画像が映えるレイアウトで、メニューの魅力を最大限に伝えます。

### 6. 省電力・長時間稼働への配慮
- **ダークモード**: 有機ELディスプレイでのバッテリー消費を抑え、夜間のイベントでも目に優しい設計です。
- **画面スリープ防止 (Wake Lock)**: 注文待ち受け中に画面が消えるのを防ぎ、常に最新の状況を確認できます。
- **通信量の最適化**:
    - **画像軽量化 (WebP)**: アップロード時に画像を自動で軽量化し、通信量を大幅に削減します。
    - **PWA (オフライン対応)**: 電波の悪い場所でもアプリが動作し、キャッシュ機能で通信を節約します。
    - **スマートな読み込み**: 画面遷移を予測して裏読み込みを行い、待ち時間をゼロにします。

### 7. リッチな操作体験（インタラクション）
- **スワイプ削除**: カート内の商品は、スマホアプリのようにスワイプして削除できます。
- **触覚フィードバック**: ボタンタップや注文確定時に、心地よいバイブレーションで応答します。
- **波紋エフェクト**: タップした瞬間に波紋が広がり、操作に対する視覚的なフィードバックを提供します。

### 8. 店舗ブランディングと集客支援
- **SNSリンク連携**: Instagram, X (Twitter), LINEなどのSNSリンクを設定し、注文完了画面でお客様にアピールできます。
- **QRコードカスタマイズ**: ブランドカラーに合わせた色変更や、ロゴ画像の埋め込みが可能。SVG/PNG形式でダウンロードして、チラシやPOPに活用できます。

### 9. 充実したヘルプとサポート
- **管理画面ヘルプ**: 各機能（メニュー登録、オプション設定、売上分析など）に詳細なヘルプセクションを追加。初めての方でも迷わず操作できます。
- **運用ガイド**: 開店準備から閉店作業までの流れをガイドし、スムーズな店舗運営をサポートします。

### 10. セキュリティ強化
- **App Check**: Google reCAPTCHA v3を使用したApp Checkを導入し、不正なアクセスやボットからAPIを保護しています。

## 技術スタック
- **Frontend**: React, TypeScript, Vite, Material UI
- **Libraries**: react-swipeable-list, framer-motion (planned)
- **Backend / Infrastructure**: Firebase (Hosting, Functions, Firestore, Storage, App Check)
- **Payment**: Stripe Connect (Express Accounts)

## Getting Started (開発者向け)

### 1. リポジトリのクローン
```bash
git clone <repository-url>
cd marche-app
```

### 2. 依存関係のインストール
```bash
npm install
```

### 3. 環境変数の設定
ルートディレクトリに `.env` ファイルを作成し、以下の変数を設定してください。
```env
# Firebase Configuration
VITE_API_KEY=your_api_key
VITE_AUTH_DOMAIN=your_project_id.firebaseapp.com
VITE_PROJECT_ID=your_project_id
VITE_MESSAGING_SENDER_ID=your_sender_id
VITE_APP_ID=your_app_id
VITE_MEASUREMENT_ID=your_measurement_id
VITE_RECAPTCHA_SITE_KEY=your_recaptcha_site_key

# Stripe Configuration
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_... (または pk_live_...)
```

### 4. 開発サーバーの起動
```bash
npm run dev
```
ブラウザで `http://localhost:3000` にアクセスするとアプリが起動します。

### 5. デプロイ (Firebase)
```bash
# ビルド
npm run build

# Firebaseへのデプロイ
firebase deploy
```
